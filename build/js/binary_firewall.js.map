{"version":3,"sources":["build/js/binary_firewall.js"],"names":[],"mappings":"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","file":"build/js/binary_firewall.js","sourcesContent":["/**\r\n * Created by davide on 16/03/2015.\r\n */\r\n\r\nconsole.log(\"Binary Firewall Game || Version 0.1 || Davide Aversa 2015 (c)\");\r\n\r\nclass GameData {\r\n    constructor() {\r\n        this.phaser_game = new Phaser.Game(300, 600, Phaser.AUTO, 'binary-firewall', { preload: preload, create: create, render: render, update: update });\r\n        this.playerLife = 10;\r\n        this.enemies = [];\r\n        this.friendly = [];\r\n    }\r\n}\r\n\r\nclass EnemyPackage {\r\n    constructor(index, game, lane) {\r\n        let halfSpriteSize = 12;\r\n        let x = getXByLane(lane) - halfSpriteSize;\r\n        let y = 200;\r\n\r\n        this.speed = 0.2; // TODO: It should be dependant of match time! :)\r\n\r\n        this.game = game;\r\n        this.lane = lane;\r\n        this.name = index.toString();\r\n        this.mainSprite = game.phaser_game.add.game.add.sprite(x,y,'en_nose', 0);\r\n        this.animation = this.mainSprite.animations.add('walk');\r\n        this.animation.play(2, true);\r\n    }\r\n\r\n    update() {\r\n        this.mainSprite.y += this.speed;\r\n        if (this.mainSprite.y >= 400) { // TODO: Make this parametric!\r\n            this.enemyHit();\r\n        }\r\n    }\r\n\r\n    destroy(){\r\n        this.mainSprite.destroy();\r\n        let index = game.enemies.indexOf(this);\r\n        if (index > -1) {\r\n            game.enemies.splice(index,1);\r\n        }\r\n    }\r\n\r\n    enemyHit() {\r\n        this.game.playerLife--;\r\n        console.log(\"ENEMY HIT: PlayerLife = \" + this.game.playerLife);\r\n        this.destroy();\r\n    }\r\n}\r\n\r\nclass FriendlyPackage {\r\n    constructor(index, game, lane) {\r\n        let halfSpriteSize = 12;\r\n        let x = getXByLane(lane) - halfSpriteSize;\r\n        let y = 200;\r\n\r\n        this.speed = 0.2; // TODO: It should be dependant of match time! :)\r\n        this.game = game;\r\n        this.lane = lane;\r\n        this.name = index.toString();\r\n        this.mainSprite = game.phaser_game.add.game.add.sprite(x,y,'friendly', 0);\r\n        this.animation = this.mainSprite.animations.add('walk');\r\n        this.animation.play(2, true);\r\n    }\r\n\r\n    update() {\r\n        this.mainSprite.y += this.speed;\r\n    }\r\n}\r\n\r\nclass PlayerBullet {\r\n    constructor(index, game, lane) {\r\n        this.radius = 30;\r\n        var x = getXByLane(lane);\r\n        x = x - this.radius; // Center the sprite on the lane.\r\n        var y = 400;\r\n\r\n        this.speed = 6;\r\n\r\n        this.game = game;\r\n        this.mainSprite = game.phaser_game.add.graphics(x, y);\r\n    }\r\n\r\n    update() {\r\n        this.mainSprite.y -= this.speed;\r\n        // Handle bullets out of the screen.\r\n        if (this.mainSprite.y < -10) {\r\n            this.destroyOnExit();\r\n        }\r\n    }\r\n\r\n    destroyOnExit() {\r\n        this.mainSprite.destroy();\r\n        let index = game.bullets.indexOf(this);\r\n        if (index > -1) {\r\n            game.bullets.splice(index,1);\r\n        } else {\r\n            console.log(\"BAD!\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.mainSprite.beginFill(0xFF0000, 1);\r\n        this.mainSprite.drawCircle(this.radius, this.radius, 10);\r\n    }\r\n}\r\n\r\nvar game = new GameData();\r\ngame.numberBuffer = \"00\";\r\ngame.numberBufferIndex = 0;\r\ngame.bufferSize = 2;\r\n\r\nfunction getXByLane(lane) {\r\n    var margin = 25;\r\n    var totalLanes = 4;\r\n    return margin + lane * ( (300 - 2*margin)/(totalLanes-1));\r\n}\r\n\r\n/**\r\n * Convert a number into its binary representation.\r\n * @param num the input number.\r\n * @returns {String} The result binary string.\r\n */\r\nfunction num2binary(num) {\r\n    return num.toString(2);\r\n}\r\n\r\n/**\r\n * Add the current number to the input buffer.\r\n * @param num A 1-digit number.\r\n */\r\nfunction numKeyPressed(num) {\r\n    if (num <0 || num >= 10) { return; } // Nothing to do. TODO: Explicit error.\r\n    var index = game.numberBufferIndex;\r\n    game.numberBuffer = game.numberBuffer.substr(0, index) + num + game.numberBuffer.substr(index+1);\r\n    game.numberBufferIndex = (game.numberBufferIndex+1>=2) ? 0 :game.numberBufferIndex+1 ;\r\n    console.log(\"DEBUG: \" + game.numberBuffer);\r\n}\r\n\r\n/**\r\n * check if the binary representation is an overflow respect the maximum number of lane in the current game.\r\n * @param num The input number.\r\n * @returns {boolean}\r\n */\r\nfunction isOverflow(num) {\r\n    var totalLanes = 4; // TODO: Move in the game object.\r\n    return num > Math.pow(2,totalLanes)-1;\r\n}\r\n\r\n/**\r\n * Preforms the shoot action.\r\n */\r\nfunction shoot() {\r\n    var num = parseInt(game.numberBuffer,10);\r\n    if (isOverflow(num)){\r\n        console.log(\"Overflow!\");\r\n    } else {\r\n        var stringCode =num2binary(num);\r\n        for (var i=0;i<stringCode.length;i++) {\r\n            if (stringCode[i] === '1') {\r\n                game.bullets.push(new PlayerBullet(1,game,i));\r\n            }\r\n        }\r\n    }\r\n    game.numberBuffer = \"00\";\r\n    game.numberBufferIndex = 0;\r\n}\r\n\r\n/**\r\n * Draws on screen the input numeric sprites. TODO: And attach events to them.\r\n */\r\nfunction drawNumericInput() {\r\n    var numericInput = game.phaser_game.add.group();\r\n    var item;\r\n\r\n    // Put Numbers\r\n    for (let i=0;i<5;i++) {\r\n        item = numericInput.create(25+50*i, 500, 'numbers', i);\r\n    }\r\n\r\n    for (let i=0;i<5;i++) {\r\n        item = numericInput.create(25+50*i, 550, 'numbers', i+5);\r\n    }\r\n}\r\n/* jshint latedef: false */\r\nfunction preload() {\r\n    game.phaser_game.load.spritesheet('numbers','assets/font_number_sprite.png', 45, 45);\r\n    game.phaser_game.load.spritesheet('en_nose','assets/enemy_nose24x30.png',24,30);\r\n    game.phaser_game.load.spritesheet('friendly','assets/friendly_thing24x30.png',24,30);\r\n}\r\n\r\nfunction create() {\r\n    var pgame = game.phaser_game;\r\n    pgame.renderer.renderSession.roundPixels = true;\r\n    drawNumericInput();\r\n    game.enemies = [];\r\n    game.enemies.push(new EnemyPackage(1,game,0));\r\n    game.enemies.push(new EnemyPackage(2,game,1));\r\n    game.enemies.push(new FriendlyPackage(2,game,2));\r\n    game.enemies.push(new EnemyPackage(2,game,3));\r\n\r\n    game.bullets = [];\r\n\r\n    game.textGUICode = pgame.add.text(pgame.world.centerX, 450, game.numberBuffer, { font: \"65px Arial\", fill: \"#ffffff\", align: \"center\" } );\r\n    game.textGUICode.anchor.set(0.5);\r\n\r\n    // Draw Line\r\n    var graphics = game.phaser_game.add.graphics(0, 0);\r\n\r\n    graphics.lineStyle(8, 0x33FF00);\r\n    graphics.moveTo(0,400);\r\n    graphics.lineTo(300, 400);\r\n\r\n    // Setup Numeric Input\r\n    // TODO: What does that \"this\" mean?\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.ONE).onDown.add(() => numKeyPressed(1), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.TWO).onDown.add(() => numKeyPressed(2), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.THREE).onDown.add(() => numKeyPressed(3), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.FOUR).onDown.add(() => numKeyPressed(4), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.FIVE).onDown.add(() => numKeyPressed(5), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.SIX).onDown.add(() => numKeyPressed(6), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.SEVEN).onDown.add(() => numKeyPressed(7), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.EIGHT).onDown.add(() => numKeyPressed(8), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.NINE).onDown.add(() => numKeyPressed(9), this);\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.ZERO).onDown.add(() => numKeyPressed(0), this);\r\n\r\n    // Setup Shoot Input\r\n    pgame.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(shoot, this);\r\n}\r\n\r\nfunction render() {\r\n    game.textGUICode.text = game.numberBuffer;\r\n    game.bullets.forEach((x) => x.render());\r\n}\r\n\r\nfunction update() {\r\n    game.bullets.forEach((x) => x.update());\r\n    game.enemies.forEach((x) => x.update());\r\n}\r\n/* jshint latedef: true */"]}